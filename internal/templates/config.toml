# Construct CLI Configuration File
# Path: ~/.config/construct-cli/config.toml
# Documentation: https://github.com/EstebanForge/construct-cli

# Runtime Preferences
[runtime]
# Options: "auto", "container", "podman", "docker"
# "auto" will detect in priority order: container > podman > docker
engine = "auto"

# Automatically check for updates once per day (true/false)
auto_update_check = true

# Update check interval in seconds (default: 86400 = 24 hours)
update_check_interval = 86400

# Sandbox Settings
[sandbox]
# Mount the entire home directory? (Dangerous, default: false)
mount_home = false

# Securely forward local SSH agent to the container (default: true)
forward_ssh_agent = true

# Automatically propagate host Git identity (user.name/email) to container (default: true)
propagate_git_identity = true

# SELinux mount labels on Linux: "auto" | "enabled" | "disabled"
selinux_labels = "auto"

# Default shell inside the container
shell = "/bin/bash"

# Hostname for the host clipboard bridge
clipboard_host = "host.docker.internal"

# Agent Behavior
[agents]
# Enable yolo mode for all supported agents (default: false, overrides yolo_agents)
yolo_all = false

# Enable yolo mode for specific agents (slugs), e.g. ["claude", "gemini"]
# Supported: claude, gemini, codex, qwen, copilot, cline, kilocode
yolo_agents = []

# Daemon Settings
[daemon]
# Automatically start daemon on first agent run for faster subsequent starts (default: true)
# When enabled, running any agent will start the daemon if not already running,
# then execute the agent via the daemon for ~2-5s faster startup times.
# Use 'construct daemon stop' to manually stop the daemon when not needed.
auto_start = true

# Network Isolation (Optional)
[network]
# Mode: "permissive" (default), "strict" (block all except allowed), "offline" (no network)
mode = "permissive"

# Domain allowlist (supports wildcards)
allowed_domains = [
    "*.anthropic.com",
    "*.openai.com",
    "*.googleapis.com",
    "api.z.ai"
]

# IP/CIDR allowlist
allowed_ips = [
    "1.1.1.1/32",     # Cloudflare DNS
    "8.8.8.8/32"      # Google DNS
]

# Domain blocklist (takes precedence)
blocked_domains = [
    "*.malicious-site.example",
    "*.phishing.attempt.com"
]

# IP blocklist
blocked_ips = [
    "192.168.100.100/32",
    "203.0.113.0/24"
]

# Maintenance Settings
[maintenance]
# Enable periodic cleanup of old log files (true/false)
cleanup_enabled = true

# Cleanup interval in seconds (default: 86400 = 24 hours)
cleanup_interval_seconds = 86400

# Delete logs older than this many days (default: 15)
log_retention_days = 15

# Claude Code Provider Aliases
# Configure custom API endpoints and authentication for Claude Code.
# Reference host environment variables using ${VAR_NAME} syntax
# OR use direct values (less secure but simpler).

# Example: Z.AI GLM Provider (Uncomment to use)
# [claude.cc.zai]
# ANTHROPIC_BASE_URL = "https://api.z.ai/api/anthropic"
# ANTHROPIC_AUTH_TOKEN = "${CNSTR_ZAI_API_KEY}"
# API_TIMEOUT_MS = "3000000"
# CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC = "1"
